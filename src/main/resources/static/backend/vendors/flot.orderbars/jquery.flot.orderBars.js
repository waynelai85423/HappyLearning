(function(a){function b(s){var q;var p;var d;var e;var r=1;var o=false;var j={};function t(C,E,A){var F=null;if(v(E)){i(E);h(C);u(C);f(E);if(p>=2){var D=l(E);var B=0;var z=g();if(typeof j[E.bars.order]==="undefined"){if(n(D)){j[E.bars.order]=-1*(y(q,D-1,Math.floor(p/2)-1))-z}else{j[E.bars.order]=y(q,Math.ceil(p/2),D-2)+z+e*2}}B=j[E.bars.order];F=w(A,E,B);A.points=F}}return F}function v(z){return z.bars!=null&&z.bars.show&&z.bars.order!=null}function h(C){var A=o?C.getPlaceholder().innerHeight():C.getPlaceholder().innerWidth();var B=o?m(C.getData(),1):m(C.getData(),0);var z=B[1]-B[0];r=z/A}function m(C,z){var B=new Array();for(var A=0;A<C.length;A++){B[0]=(C[A].data[0])?C[A].data[0][z]:null;B[1]=(C[A].data[C[A].data.length-1])?C[A].data[C[A].data.length-1][z]:null}return B}function u(z){q=k(z.getData());p=q.length}function k(C){var B=new Array();var A=[];for(var z=0;z<C.length;z++){if(C[z].bars.order!=null&&C[z].bars.show&&A.indexOf(C[z].bars.order)<0){A.push(C[z].bars.order);B.push(C[z])}}return B.sort(x)}function x(z,A){var B=z.bars.order;var C=A.bars.order;return((B<C)?-1:((B>C)?1:0))}function f(z){d=typeof z.bars.lineWidth!=="undefined"?z.bars.lineWidth:2;e=d*r}function i(z){if(z.bars.horizontal){o=true}}function l(B){var A=0;for(var z=0;z<q.length;++z){if(B==q[z]){A=z;break}}return A+1}function g(){var z=0;if(p%2!=0){z=(q[Math.ceil(p/2)].bars.barWidth)/2}return z}function n(z){return z<=Math.ceil(p/2)}function y(B,C,z){var D=0;for(var A=C;A<=z;A++){D+=B[A].bars.barWidth+e*2}return D}function w(z,F,A){var E=z.pointsize;var D=z.points;var C=0;for(var B=o?1:0;B<D.length;B+=E){D[B]+=A;F.data[C][3]=D[B];C++}return D}s.hooks.processDatapoints.push(t)}var c={series:{bars:{order:null}}};a.plot.plugins.push({init:b,options:c,name:"orderBars",version:"0.2"})})(jQuery);